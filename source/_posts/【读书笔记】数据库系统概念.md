---
title: 【读书笔记】数据库系统概念
date: 2022-09-08 21:53:38
tags: 读书笔记
categories: 数据库
---
引言
---
### 数据库系统应用
数据库有两种用途：

1. **联机事务处理**，即大量用户使用数据库，每个用户检索相对少量的数据，进行小的更新
2. **数据分析**，即审阅数据，给出结论

### 数据库系统的目标
**文件处理系统（file-processing system）**有如下弊端：

* 数据冗余和不一致性
* 数据访问困难
* 数据孤立
* 完整性问题
* 原子性问题
* 并发访问异常
* 安全性问题

### 数据视图
#### 数据模型
数据库结构的基础是**数据模型（data model）**：一个描述数据、数据联系、数据语义以及一致性约束的概念工具的集合。

数据模型可以被分为四类：

* **关系模型（relational model）**：关系模型用**表的集合**来表示数据和数据间的联系，**表也称为关系**。
* **实体-联系模型（entity-relational model）**：E-R模型使用称为**实体**的基本对象的集合，以及这些对象之间的**联系**。
* **半结构化数据模型（semi-structured data model）**：半结构化数据模型允许在其数据定义中某些相同类型的数据项含有不同的属性集。比如JSON和可扩展标记语言（eXtensible Markuo Language, XML）。
* **基于对象的数据模型（object-based data model）**：可以看成对关系模型进行扩展，增加了封装、方法和对象标识。
<!--more-->

#### 数据抽象
通过**数据抽象**来对用户屏蔽复杂性，以简化用户与系统之间的交互，数据抽象的层次从低到高为：

* **物理层（physical level）** 描述数据实际上是怎么存储的。
* **逻辑层（logical level）** 描述数据库中存储什么数据以及数据间存在什么联系。
* **视图层（view level）** 描述整个数据库的某个部分。

#### 实例和模式
特定时刻存储在数据库中的信息的集合称为数据库的一个**实例**，而数据库的总体设计乘坐数据库**模式**。

### 数据库语言
数据库系统提供**数据定义语言（Data-Definition Language, DDL）**来定义数据库模式，并提供**数据操纵语言（Data-Manipulation Language, DML）**来表达数据库的查询和更新。他们是单一数据库语言（比如SQL）的不同部分。

#### 数据库定义语言
可以通过一系列被称作**数据存储和定义**的DDL语言来说明数据库系统所采用的存储结构和访问方式，

数据库系统仅实现可以以最小代价测试的完整性约束：

* **域约束（domain constraint）**：每个属性都必须对应于一个域，比如整数型、字符型、日期/时间型。**域约束是完整性约束的最基本形式。**
* **引用完整性（referential integrity）**。
* **授权（autorization）**：
  * 读权限
  * 插入权限
  * 更新权限
  * 删除权限

#### SQL数据定义语言
```sql
create table department
(dept_name	char(20),
building	char(15),
budget		numeric(12,2));
```

#### 数据操纵语言
作用：对数据库**增、删、改、查**。

有两种类型的DML：

* **过程化的DML（procedural DML）**：要求用户指定需要什么数据以及如何获得这些数据。
* **声明式的DML（declarative DML）**：只要求用户指定需要什么数据，而不必指明如何获得这些数据。

#### SQL数据操纵语言
查询一个表的例子：

```sql
select instrector.name
from instructor
where instructor.dept_name = 'History';
```

查询多个表的例子：

```sql
select instrector.name, department.dept_name
from instructor, department
where instructor.dept_name = department.dept_name and 
      department.budget > 95000;
```

### 数据库引擎
数据库系统的功能部件可分为**存储管理器**、**查询处理器**和**事务管理部件**。

#### 存储管理器
存储管理器（storage manager）是数据库系统中负责在数据库中存储的低层数据与应用程序以及向系统提交的查询之间提供接口的部件。存储管理器部件包括：

* 权限及完整性管理器
* 事务管理器
* 文件管理器
* 缓冲区管理器

存储管理器实现了以下几种数据结构：

* 数据文件
* 数据字典
* 索引

#### 查询处理器
* DDL解释器
* DDL编译器
* 查询执行引擎

#### 事务管理
* 原子性
* 一致性
* 持久性

事务管理器包括**并发控制管理器**和**恢复管理器**。

* 原子性和持久性的保证是**恢复管理器**的指责；
* 一致性是**并发控制管理器**的指责。

### 数据库和应用体系结构
早期的数据库采用**两层体系结构**：客户机 -> 数据库；现如今的数据库采用**三层体系结构**：客户机 -> 应用服务器 -> 数据库系统。三层结构比两层结构**更安全、性能更好**。

关系模型介绍
---
### 关系数据库的结构
在关系模型中，术语 **关系（relation）**被用来指代 **表**，而术语 **元组（tuple）**被用来指代 **行**，术语 **属性（attribute）**指代的是表中的 **列**。

关系是元组的 **集合（set）**，所以元组在关系中出现的顺序是无关紧要的。

对于关系的每个属性都存在一个允许取值的集合，称为该属性的 **域（domain）**。我们要求**一个关系的所有属性的域都是原子的。**如果一个属性存的是一组集合，那么他就不是原子的。

关系型数据库适合存定义明确而且相对静态的应用，但不是用于存取那些数据本身以及数据类型结构经常变化的应用。

### 数据库模式
* **数据库模式：**数据库的逻辑设计
* **数据库实例：**数据库中数据的一个快照

### 码
**一个关系中不可以有两个元组在所有属性上取值完全相同。**

**超码（superkey）**是**一个或多个**属性的集合，超码可以让我们在一个关系中**唯一地**表示出来一个元组。

如果 K 是一个超码，那么 K 的任意超集也都是超码，因此超码中可能包含无关紧要的属性。如果一个超码的任意真子集都不是超码，那么我们将这样的最小超码称为 **候选码（candidate key）**。

一个关系中可能存在两个或以上的候选码，因此我们用 **主码（primary key）**来表示被选中的候选码。
